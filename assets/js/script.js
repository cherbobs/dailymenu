document.addEventListener("DOMContentLoaded",()=>{const t=document.documentElement;fetch("navbar.html").then(e=>e.text()).then(e=>{document.getElementById("navbar-container").innerHTML=e;const s=window.location.pathname.split("/").pop(),o=document.querySelectorAll(".nav-links a");o.forEach(e=>{const t=e.getAttribute("href");t===s||s===""&&t==="index.html"?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")});const t=document.getElementById("burger-menu"),n=document.getElementById("mobile-menu-container");if(t&&n){t.addEventListener("click",()=>{n.classList.toggle("active"),t.classList.toggle("active")});const e=n.querySelectorAll("a");e.forEach(e=>{e.addEventListener("click",()=>{n.classList.remove("active"),t.classList.remove("active")})})}}).catch(e=>{console.error("Erreur lors du chargement de la navbar :",e)});const n=document.getElementById("toggleBtn2");function a(e){e?(t.classList.add("dyslexic-mode"),n?.classList.add("active"),n?.setAttribute("aria-checked","true"),localStorage.setItem("dyslexic","true")):(t.classList.remove("dyslexic-mode"),n?.classList.remove("active"),n?.setAttribute("aria-checked","false"),localStorage.setItem("dyslexic","false"))}const c=localStorage.getItem("dyslexic")==="true";a(c),n?.addEventListener("click",()=>{const e=n.classList.contains("active");a(!e)});const s=document.getElementById("toggleBtn1");function r(e){e?(t.classList.add("high-contrast-mode"),s?.classList.add("active"),s?.setAttribute("aria-checked","true"),localStorage.setItem("contrast","true")):(t.classList.remove("high-contrast-mode"),s?.classList.remove("active"),s?.setAttribute("aria-checked","false"),localStorage.setItem("contrast","false"))}const l=localStorage.getItem("contrast")==="true";r(l),s?.addEventListener("click",()=>{const e=s.classList.contains("active");r(!e)});const e=document.getElementById("slider");function d(e){t.style.fontSize=`${e}px`,localStorage.setItem("fontSize",e)}function o(t){const n=parseInt(e?.min),o=parseInt(e?.max),s=(t-n)/(o-n)*100;e&&(e.style.background=`linear-gradient(to right, var(--primary-color) ${s}%, #ccc ${s}%)`)}const i=parseInt(localStorage.getItem("fontSize"))||16;if(t.style.fontSize=`${i}px`,e){e.max="36",e.value=i,o(i);let t;e.addEventListener("input",()=>{const n=e.value;o(n),clearTimeout(t),t=setTimeout(()=>{d(n)},300)})}const u=document.getElementById("resetBtn");u?.addEventListener("click",()=>{t.classList.remove("dyslexic-mode","high-contrast-mode"),t.style.fontSize="16px",s?.classList.remove("active"),s?.setAttribute("aria-checked","false"),n?.classList.remove("active"),n?.setAttribute("aria-checked","false"),e&&(e.value=16,o(16)),localStorage.removeItem("dyslexic"),localStorage.removeItem("contrast"),localStorage.removeItem("fontSize")})})